import os
import requests as rq

OKGREEN = '\033[92m'
FAIL = '\033[91m'

url = "http://localhost"
wordlist = "/usr/share/seclists/Discovery/Web-Content/web-extensions.txt"
fail_text="fail"
success_text="success"
test_file = "cool"
test_folder = "files"
data = {"submit": "upload file"}
proxies = {'all': 'http://127.0.0.1:8080'}

prev_file = f"{test_folder}/{test_file}"
with open(wordlist, "r") as words:
    for extension in words:
        extension = extension.strip()
        current_file = f"{test_folder}/{test_file}{extension}"
        os.rename(prev_file, current_file)
        with open(current_file, "rb") as uploaded_file:
            files = {f'file': uploaded_file}
            response = rq.post(url, data=data, files=files, proxies=proxies)
            print(response.text)
            if success_text in response.text:
                print(f"{OKGREEN}{extension} - yes")
            elif fail_text in response.text:
                print(f"{FAIL}{extension} - no")
        prev_file = current_file
